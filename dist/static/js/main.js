document.addEventListener('click', event => {
  if (!event.target.matches('.rt-alert__closeBtn')) return;
  event.target.parentNode.style.display = "none"; // prevent following the link

  event.preventDefault();
}, false);

/* Get parent */
const closest = (el, sel) => {
  if (el != null) return el.matches(sel) ? el : el.querySelector(sel) || closest(el.parentNode, sel);
};
/*show thank you box*/


const showThankYou = element => {
  let hide = closest(element, ".rt-vote__item__options");
  let show = closest(element, ".rt-vote__item__voted");
  show.style.display = "block";
  hide.style.display = "none";
};
/* show thumbs options*/


const showOptions = element => {
  let show = closest(element, ".rt-vote__item__options");
  let hide = closest(element, ".rt-vote__item__voted");
  let radios = closest(element, ".rt-vote__item__thumb");
  show.style.display = "block";
  hide.style.display = "none";
  radios.checked = false;
};
/* Vote Up functions*/


const voteUp = element => {
  let op1 = closest(element, ".rt-vote__results__thumb-up p").innerHTML;
  let posNum = parseInt(op1, 10);
  let op2 = closest(element, ".rt-vote__results__thumb-down p").innerHTML;
  let negNum = parseInt(op2, 10);
  posNum += 1;
  negNum -= 1;
  closest(element, ".rt-vote__item__voteNow").addEventListener("click", function () {
    closest(element, ".rt-vote__results__thumb-up p").innerHTML = +posNum + "<span>%</span>";
    closest(element, ".rt-vote__results__thumb-down p").innerHTML = +negNum + "<span>%</span>";
    closest(element, ".rt-vote__results__thumb-up").style.width = +posNum + "%";
    closest(element, ".rt-vote__results__thumb-down").style.width = +negNum + "%";
    showThankYou(element);
    checkLocalStorage(element);
    localStorage.setItem('up', op1 += 1);
    localStorage.setItem('down', op2 -= 1);
  });
};
/*vote down options*/


const voteDown = element => {
  let op1 = closest(element, ".rt-vote__results__thumb-up p").innerHTML;
  let posNum = parseInt(op1, 10);
  let op2 = closest(element, ".rt-vote__results__thumb-down p").innerHTML;
  let negNum = parseInt(op2, 10);
  negNum += 1;
  posNum -= 1;
  closest(element, ".rt-vote__item__voteNow").addEventListener("click", function () {
    closest(element, ".rt-vote__results__thumb-down p").innerHTML = +negNum + "<span>%</span>";
    closest(element, ".rt-vote__results__thumb-up p").innerHTML = +posNum + "<span>%</span>";
    closest(element, ".rt-vote__results__thumb-up").style.width = +posNum + "%";
    closest(element, ".rt-vote__results__thumb-down").style.width = +negNum + "%";
    showThankYou(element);
  });
};
/* change badge depending on votes*/


const changeBagde = element => {
  let op1 = closest(element, ".rt-vote__results__thumb-up p").innerHTML;
  let op2 = closest(element, ".rt-vote__results__thumb-down p").innerHTML;
  let titleBange = closest(element, ".rt-vote__item__title");

  if (op1 > op2) {
    titleBange.classList.add('thumbUp-badge');
    titleBange.classList.remove('thumbDown-badge');
  } else {
    titleBange.classList.add('thumbDown-badge');
    titleBange.classList.remove('thumbUp-badge');
  }
};
/* execute functions for each vote button*/


Array.from(document.querySelectorAll('.rt-vote__item__thumb')).forEach(element => {
  element.addEventListener("click", function () {
    changeBagde(element);

    if (element.value == 1) {
      voteUp(element);
    } else if (element.value == 2) {
      voteDown(element);
    }
  });
});
/* execute functions for each vote again button*/

Array.from(document.querySelectorAll('.rt-vote__item__voted')).forEach(element => {
  element.addEventListener("click", function () {
    showOptions(element);
  });
});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFsZXJ0cy5qcyIsImludGVyYWN0aW9ucy5qcyIsInZvdGVzLmpzIl0sIm5hbWVzIjpbImRvY3VtZW50IiwiYWRkRXZlbnRMaXN0ZW5lciIsImV2ZW50IiwidGFyZ2V0IiwibWF0Y2hlcyIsInBhcmVudE5vZGUiLCJzdHlsZSIsImRpc3BsYXkiLCJwcmV2ZW50RGVmYXVsdCIsImNsb3Nlc3QiLCJlbCIsInNlbCIsInF1ZXJ5U2VsZWN0b3IiLCJzaG93VGhhbmtZb3UiLCJlbGVtZW50IiwiaGlkZSIsInNob3ciLCJzaG93T3B0aW9ucyIsInJhZGlvcyIsImNoZWNrZWQiLCJ2b3RlVXAiLCJvcDEiLCJpbm5lckhUTUwiLCJwb3NOdW0iLCJwYXJzZUludCIsIm9wMiIsIm5lZ051bSIsIndpZHRoIiwiY2hlY2tMb2NhbFN0b3JhZ2UiLCJsb2NhbFN0b3JhZ2UiLCJzZXRJdGVtIiwidm90ZURvd24iLCJjaGFuZ2VCYWdkZSIsInRpdGxlQmFuZ2UiLCJjbGFzc0xpc3QiLCJhZGQiLCJyZW1vdmUiLCJBcnJheSIsImZyb20iLCJxdWVyeVNlbGVjdG9yQWxsIiwiZm9yRWFjaCIsInZhbHVlIl0sIm1hcHBpbmdzIjoiQUFBQUEsUUFBUSxDQUFDQyxnQkFBVCxDQUEwQixPQUExQixFQUFvQ0MsS0FBRCxJQUFXO0FBRTdDLE1BQUksQ0FBQ0EsS0FBSyxDQUFDQyxNQUFOLENBQWFDLE9BQWIsQ0FBcUIscUJBQXJCLENBQUwsRUFBa0Q7QUFDbERGLEVBQUFBLEtBQUssQ0FBQ0MsTUFBTixDQUFhRSxVQUFiLENBQXdCQyxLQUF4QixDQUE4QkMsT0FBOUIsR0FBd0MsTUFBeEMsQ0FINkMsQ0FLN0M7O0FBQ0FMLEVBQUFBLEtBQUssQ0FBQ00sY0FBTjtBQUdBLENBVEQsRUFTRyxLQVRIO0FDQUE7QUNBQTtBQUNBLE1BQU1DLE9BQU8sR0FBRyxDQUFDQyxFQUFELEVBQUtDLEdBQUwsS0FBYTtBQUMzQixNQUFJRCxFQUFFLElBQUksSUFBVixFQUNFLE9BQU9BLEVBQUUsQ0FBQ04s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QSxFQUFBQSxPQUFPLENBQUNiLGdCQUFSLENBQXlCLE9BQXpCLEVBQWtDLFlBQVc7QUFFM0NnQixJQUFBQSxXQUFXLENBQUNILE9BQUQsQ0FBWDtBQUNELEdBSEQ7QUFJRCxDQVBIIiwiZmlsZSI6Im1haW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyJkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChldmVudCkgPT4ge1xuXG5cdGlmICghZXZlbnQudGFyZ2V0Lm1hdGNoZXMoJy5ydC1hbGVydF9fY2xvc2VCdG4nKSkgcmV0dXJuO1xuXHRldmVudC50YXJnZXQucGFyZW50Tm9kZS5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XG5cblx0Ly8gcHJldmVudCBmb2xsb3dpbmcgdGhlIGxpbmtcblx0ZXZlbnQucHJldmVudERlZmF1bHQoKTtcblxuXG59LCBmYWxzZSk7XG5cbiIsIiIsIi8qIEdldCBwYXJlbnQgKi9cbmNvbnN0IGNsb3Nlc3QgPSAoZWwsIHNlbCkgPT4ge1xuICBpZiAoZWwgIT0gbnVsbClcbiAgICByZXR1cm4gZWwubWF0Y2hlcyhzZWwpID8gZWwgOlxuICAgICAgKGVsLnF1ZXJ5U2VsZWN0b3Ioc2VsKSB8fFxuICAgICAgICBjbG9zZXN0KGVsLnBhcmVudE5vZGUsIHNlbCkpO1xufVxuXG5cbi8qc2hvdyB0aGFuayB5b3UgYm94Ki9cbmNvbnN0IHNob3dUaGFua1lvdSA9IChlbGVtZW50KSA9PiB7XG4gIGxldCBoaWRlID0gY2xvc2VzdChlbGVtZW50LCBcIi5ydC12b3RlX19pdGVtX19vcHRpb25zXCIpO1xuICBsZXQgc2hvdyA9IGNsb3Nlc3QoZWxlbWVudCwgXCIucnQtdm90ZV9faXRlbV9fdm90ZWRcIik7XG5cbiAgc2hvdy5zdHlsZS5kaXNwbGF5ID0gXCJibG9ja1wiO1xuICBoaWRlLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcbn1cblxuLyogc2hvdyB0aHVtYnMgb3B0aW9ucyovXG5cbmNvbnN0IHNob3dPcHRpb25zID0gKGVsZW1lbnQpID0+IHtcbiAgbGV0IHNob3cgPSBjbG9zZXN0KGVsZW1lbnQsIFwiLnJ0LXZvdGVfX2l0ZW1fX29wdGlvbnNcIik7XG4gIGxldCBoaWRlID0gY2xvc2VzdChlbGVtZW50LCBcIi5ydC12b3RlX19pdGVtX192b3RlZFwiKTtcbiAgbGV0IHJhZGlvcyA9IGNsb3Nlc3QoZWxlbWVudCwgXCIucnQtdm90ZV9faXRlbV9fdGh1bWJcIik7XG5cbiAgc2hvdy5zdHlsZS5kaXNwbGF5ID0gXCJibG9ja1wiO1xuICBoaWRlLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcbiAgcmFkaW9zLmNoZWNrZWQgPSBmYWxzZTtcbn1cblxuLyogVm90ZSBVcCBmdW5jdGlvbnMqL1xuY29uc3Qgdm90ZVVwID0gKGVsZW1lbnQpID0+IHtcbiAgbGV0IG9wMSA9IGNsb3Nlc3QoZWxlbWVudCwgXCIucnQtdm90ZV9fcmVzdWx0c19fdGh1bWItdXAgcFwiKS5pbm5lckhUTUw7XG4gIGxldCBwb3NOdW0gPSBwYXJzZUludChvcDEsIDEwKTtcbiAgbGV0IG9wMiA9IGNsb3Nlc3QoZWxlbWVudCwgXCIucnQtdm90ZV9fcmVzdWx0c19fdGh1bWItZG93biBwXCIpLmlubmVySFRNTDtcbiAgbGV0IG5lZ051bSA9IHBhcnNlSW50KG9wMiwgMTApO1xuXG4gIHBvc051bSArPSAxO1xuICBuZWdOdW0gLT0gMTtcbiAgY2xvc2VzdChlbGVtZW50LCBcIi5ydC12b3RlX19pdGVtX192b3RlTm93XCIpLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBmdW5jdGlvbigpIHtcbiAgICBjbG9zZXN0KGVsZW1lbnQsIFwiLnJ0LXZvdGVfX3Jlc3VsdHNfX3RodW1iLXVwIHBcIikuaW5uZXJIVE1MID0gK3Bvc051bSArIFwiPHNwYW4+JTwvc3Bhbj5cIjtcbiAgICBjbG9zZXN0KGVsZW1lbnQsIFwiLnJ0LXZvdGVfX3Jlc3VsdHNfX3RodW1iLWRvd24gcFwiKS5pbm5lckhUTUwgPSArbmVnTnVtICsgXCI8c3Bhbj4lPC9zcGFuPlwiO1xuICAgIGNsb3Nlc3QoZWxlbWVudCwgXCIucnQtdm90ZV9fcmVzdWx0c19fdGh1bWItdXBcIikuc3R5bGUud2lkdGggPSArcG9zTnVtICsgXCIlXCI7XG4gICAgY2xvc2VzdChlbGVtZW50LCBcIi5ydC12b3RlX19yZXN1bHRzX190aHVtYi1kb3duXCIpLnN0eWxlLndpZHRoID0gK25lZ051bSArIFwiJVwiO1xuICAgIHNob3dUaGFua1lvdShlbGVtZW50KTtcbiAgICBjaGVja0xvY2FsU3RvcmFnZShlbGVtZW50KTtcbiAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgndXAnLCBvcDEgKz0gMSk7XG4gICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ2Rvd24nLCBvcDIgLT0gMSk7XG4gIH0pO1xufVxuXG4vKnZvdGUgZG93biBvcHRpb25zKi9cbmNvbnN0IHZvdGVEb3duID0gKGVsZW1lbnQpID0+IHtcbiAgbGV0IG9wMSA9IGNsb3Nlc3QoZWxlbWVudCwgXCIucnQtdm90ZV9fcmVzdWx0c19fdGh1bWItdXAgcFwiKS5pbm5lckhUTUw7XG4gIGxldCBwb3NOdW0gPSBwYXJzZUludChvcDEsIDEwKTtcbiAgbGV0IG9wMiA9IGNsb3Nlc3QoZWxlbWVudCwgXCIucnQtdm90ZV9fcmVzdWx0c19fdGh1bWItZG93biBwXCIpLmlubmVySFRNTDtcbiAgbGV0IG5lZ051bSA9IHBhcnNlSW50KG9wMiwgMTApO1xuXG4gIG5lZ051bSArPSAxO1xuICBwb3NOdW0gLT0gMTtcbiAgY2xvc2VzdChlbGVtZW50LCBcIi5ydC12b3RlX19pdGVtX192b3RlTm93XCIpLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBmdW5jdGlvbigpIHtcbiAgICBjbG9zZXN0KGVsZW1lbnQsIFwiLnJ0LXZvdGVfX3Jlc3VsdHNfX3RodW1iLWRvd24gcFwiKS5pbm5lckhUTUwgPSArbmVnTnVtICsgXCI8c3Bhbj4lPC9zcGFuPlwiO1xuICAgIGNsb3Nlc3QoZWxlbWVudCwgXCIucnQtdm90ZV9fcmVzdWx0c19fdGh1bWItdXAgcFwiKS5pbm5lckhUTUwgPSArcG9zTnVtICsgXCI8c3Bhbj4lPC9zcGFuPlwiO1xuICAgIGNsb3Nlc3QoZWxlbWVudCwgXCIucnQtdm90ZV9fcmVzdWx0c19fdGh1bWItdXBcIikuc3R5bGUud2lkdGggPSArcG9zTnVtICsgXCIlXCI7XG4gICAgY2xvc2VzdChlbGVtZW50LCBcIi5ydC12b3RlX19yZXN1bHRzX190aHVtYi1kb3duXCIpLnN0eWxlLndpZHRoID0gK25lZ051bSArIFwiJVwiO1xuICAgIHNob3dUaGFua1lvdShlbGVtZW50KTtcbiAgfSk7XG59XG5cblxuLyogY2hhbmdlIGJhZGdlIGRlcGVuZGluZyBvbiB2b3RlcyovXG5jb25zdCBjaGFuZ2VCYWdkZSA9IChlbGVtZW50KSA9PiB7XG4gIGxldCBvcDEgPSBjbG9zZXN0KGVsZW1lbnQsIFwiLnJ0LXZvdGVfX3Jlc3VsdHNfX3RodW1iLXVwIHBcIikuaW5uZXJIVE1MO1xuICBsZXQgb3AyID0gY2xvc2VzdChlbGVtZW50LCBcIi5ydC12b3RlX19yZXN1bHRzX190aHVtYi1kb3duIHBcIikuaW5uZXJIVE1MO1xuICBsZXQgdGl0bGVCYW5nZSA9IGNsb3Nlc3QoZWxlbWVudCwgXCIucnQtdm90ZV9faXRlbV9fdGl0bGVcIik7XG5cbiAgaWYgKG9wMSA+IG9wMikge1xuICAgIHRpdGxlQmFuZ2UuY2xhc3NMaXN0LmFkZCgndGh1bWJVcC1iYWRnZScpO1xuICAgIHRpdGxlQmFuZ2UuY2xhc3NMaXN0LnJlbW92ZSgndGh1bWJEb3duLWJhZGdlJyk7XG4gIH0gZWxzZSB7XG4gICAgdGl0bGVCYW5nZS5jbGFzc0xpc3QuYWRkKCd0aHVtYkRvd24tYmFkZ2UnKTtcbiAgICB0aXRsZUJhbmdlLmNsYXNzTGlzdC5yZW1vdmUoJ3RodW1iVXAtYmFkZ2UnKTtcbiAgfVxuXG59XG5cbi8qIGV4ZWN1dGUgZnVuY3Rpb25zIGZvciBlYWNoIHZvdGUgYnV0dG9uKi9cbkFycmF5XG4gIC5mcm9tKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5ydC12b3RlX19pdGVtX190aHVtYicpKVxuICAuZm9yRWFjaChlbGVtZW50ID0+IHtcbiAgICBlbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBmdW5jdGlvbigpIHtcbiAgICAgIGNoYW5nZUJhZ2RlKGVsZW1lbnQpO1xuXG4gICAgICBpZiAoZWxlbWVudC52YWx1ZSA9PSAxKSB7XG4gICAgICAgIHZvdGVVcChlbGVtZW50KTtcblxuICAgICAgfSBlbHNlIGlmIChlbGVtZW50LnZhbHVlID09IDIpIHtcbiAgICAgICAgdm90ZURvd24oZWxlbWVudCk7XG4gICAgICB9XG4gICAgfSk7XG4gIH0pXG5cblxuLyogZXhlY3V0ZSBmdW5jdGlvbnMgZm9yIGVhY2ggdm90ZSBhZ2FpbiBidXR0b24qL1xuQXJyYXlcbiAgLmZyb20oZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLnJ0LXZvdGVfX2l0ZW1fX3ZvdGVkJykpXG4gIC5mb3JFYWNoKGVsZW1lbnQgPT4ge1xuICAgIGVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGZ1bmN0aW9uKCkge1xuXG4gICAgICBzaG93T3B0aW9ucyhlbGVtZW50KTtcbiAgICB9KTtcbiAgfSkiXX0=
